{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/network/index.js","webpack:///./src/components/common/Loading/Loading.vue?ebe2","webpack:///./src/router/index.js","webpack:///./src/network/cartList/index.js","webpack:///./src/store/cartList/module.js","webpack:///./src/store/product/module.js","webpack:///./src/network/login/index.js","webpack:///./src/store/login/module.js","webpack:///./src/network/collection/index.js","webpack:///./src/store/collection/module.js","webpack:///./src/network/history/index.js","webpack:///./src/store/history/module.js","webpack:///./src/network/sort/index.js","webpack:///./src/store/sort/module.js","webpack:///./src/network/userList/index.js","webpack:///./src/store/userData/module.js","webpack:///./src/store/index.js","webpack:///./src/App.vue?642f","webpack:///./src/components/common/Loading/Loading.vue?5198","webpack:///src/components/common/Loading/Loading.vue","webpack:///./src/components/common/Loading/Loading.vue?a580","webpack:///./src/components/common/Loading/Loading.vue","webpack:///src/App.vue","webpack:///./src/App.vue?7d83","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/common/cookieAPI.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","installedCssChunks","jsonpScriptSrc","p","exports","module","l","e","promises","cssChunks","Promise","resolve","reject","href","fullhref","existingLinkTags","document","getElementsByTagName","tag","dataHref","getAttribute","rel","existingStyleTags","linkTag","createElement","type","onload","onerror","event","request","target","src","err","Error","code","parentNode","removeChild","head","appendChild","then","installedChunkData","promise","onScriptComplete","script","charset","timeout","nc","setAttribute","error","clearTimeout","chunk","errorType","realSrc","message","name","undefined","setTimeout","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","console","jsonpArray","window","oldJsonpFunction","slice","path","fetch","use","routes","component","meta","title","redirect","verifyLogin","router","base","beforeEach","to","from","next","originPush","location","this","catch","async","makeRequest","res","json","requestCartList","getCartList","addProduct","shopDetail","productDetail","assign","selected","list","cartList","proIndex","findProductIndex","shopsIid","productIid","shopIndex","findShopIndex","updateCartList","deleteProduct","shopIid","registerNewCartList","username","cartStore","getCartStore","updateCartStore","changeProductProperty","changeShopProperty","getUsername","index","item","temporaryCartList","JSON","parse","localStorage","getItem","shop","pro","setItem","stringify","namespaced","productNum","skuShow","skuDetail","mutations","state","actions","commit","dispatch","rootState","product","selectedSkuComb","skuData","selectedNum","root","getters","proIid","getProduct","getShop","productHasAllSelected","productHasNotSelected","isCheckAll","every","reduce","num","price","Number","otherList","NaN","topSwipe","coupon","address","serviceArea","showSku","newValue","prop","obj","keys","filter","sku","tree","String","k_s","v","id","previewImgUrl","s1","requestLogin","getIsLogin","login","setLogin","setUsername","logout","removeLogin","isLogin","newUserList","userData","userStore","some","password","requestCollection","shopCollection","getShopCollection","productCollection","getProductCollection","addProductCollection","detail","updateProductCollection","removeProductCollection","getProductIndex","registerNewCollection","collectionStore","getCollectionStore","updateCollectionStore","collection","temporaryProductCollection","getTemporaryCollection","temporaryShopCollection","newCollection","newCollectionStore","newProductCollection","requestHistory","getHistory","addHistory","newHistory","history","checkHasRepeat","removeHistory","unshift","updateHistory","registerNewHistory","historyStore","getHistoryStore","updateHistoryStore","historyIndex","temporaryHistory","getTemporaryHistory","newHistoryStore","requestSortList","requestSortContent","sortList","activeKey","newSortList","newKey","requestUserData","getUserStore","userList","getUserList","registerUser","nickname","updateUserStore","find","newUserStore","Store","isLoading","fn","sort","render","_vm","_h","$createElement","_c","_self","attrs","staticRenderFns","directives","rawName","expression","staticClass","props","Boolean","mapActions","historyActions","collectionActions","loginActions","userListActions","sortActions","components","Loading","initRequst","computed","$route","Math","random","methods","config","productionTip","ste","$toast","store","h","App","$mount","getCookie","cookie","keyArr","RegExp","exec","valueStartIndex","valueEndIndex","indexOf","setCookie","day","date","Date","exp","getTime","setTime","toUTCString","removeCookie","hasCookie"],"mappings":"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","file":"js/app.984d1d7b.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded CSS chunks\n \tvar installedCssChunks = {\n \t\t\"app\": 0\n \t}\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-45dce3f0\":\"1208d79b\",\"chunk-5f0b1d99\":\"2696af12\",\"chunk-666177f8\":\"c8ebd429\",\"chunk-6d73f560\":\"c72e6eb8\",\"chunk-85f18646\":\"ffd76093\",\"chunk-d4d1d52c\":\"28c3af7d\",\"chunk-d86d2ff6\":\"194a3bff\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// mini-css-extract-plugin CSS loading\n \t\tvar cssChunks = {\"chunk-45dce3f0\":1,\"chunk-5f0b1d99\":1,\"chunk-666177f8\":1,\"chunk-6d73f560\":1,\"chunk-85f18646\":1,\"chunk-d4d1d52c\":1,\"chunk-d86d2ff6\":1};\n \t\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n \t\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n \t\t\tpromises.push(installedCssChunks[chunkId] = new Promise(function(resolve, reject) {\n \t\t\t\tvar href = \"css/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-45dce3f0\":\"2a7887e6\",\"chunk-5f0b1d99\":\"49abdd42\",\"chunk-666177f8\":\"27cde4bb\",\"chunk-6d73f560\":\"79bcfa20\",\"chunk-85f18646\":\"29e2f624\",\"chunk-d4d1d52c\":\"6d2ed8fc\",\"chunk-d86d2ff6\":\"46b019ea\"}[chunkId] + \".css\";\n \t\t\t\tvar fullhref = __webpack_require__.p + href;\n \t\t\t\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n \t\t\t\tfor(var i = 0; i < existingLinkTags.length; i++) {\n \t\t\t\t\tvar tag = existingLinkTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n \t\t\t\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return resolve();\n \t\t\t\t}\n \t\t\t\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n \t\t\t\tfor(var i = 0; i < existingStyleTags.length; i++) {\n \t\t\t\t\tvar tag = existingStyleTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\");\n \t\t\t\t\tif(dataHref === href || dataHref === fullhref) return resolve();\n \t\t\t\t}\n \t\t\t\tvar linkTag = document.createElement(\"link\");\n \t\t\t\tlinkTag.rel = \"stylesheet\";\n \t\t\t\tlinkTag.type = \"text/css\";\n \t\t\t\tlinkTag.onload = resolve;\n \t\t\t\tlinkTag.onerror = function(event) {\n \t\t\t\t\tvar request = event && event.target && event.target.src || fullhref;\n \t\t\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + request + \")\");\n \t\t\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n \t\t\t\t\terr.request = request;\n \t\t\t\t\tdelete installedCssChunks[chunkId]\n \t\t\t\t\tlinkTag.parentNode.removeChild(linkTag)\n \t\t\t\t\treject(err);\n \t\t\t\t};\n \t\t\t\tlinkTag.href = fullhref;\n\n \t\t\t\tvar head = document.getElementsByTagName(\"head\")[0];\n \t\t\t\thead.appendChild(linkTag);\n \t\t\t}).then(function() {\n \t\t\t\tinstalledCssChunks[chunkId] = 0;\n \t\t\t}));\n \t\t}\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export function request(path) {\r\n\treturn fetch(\r\n\t\t'https://www.fastmock.site/mock/e0aa78bb6f2b4085b9583294d7dd1e13/JD' +\r\n\t\t\tpath\r\n\t);\r\n}\r\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/style-vw-loader/index.js??ref--0-2!./Loading.vue?vue&type=style&index=0&id=7489d258&scoped=true&lang=less&\"","import Vue from 'vue';\r\nimport VueRouter from 'vue-router';\r\nimport { hasCookie } from 'common/cookieAPI.js';\r\n\r\nVue.use(VueRouter);\r\n\r\nconst routes = [\r\n\t{\r\n\t\tpath: '/',\r\n\t\tname: 'Home',\r\n\t\tcomponent: () => import('views/Home/Home.vue'),\r\n\t\tmeta: {\r\n\t\t\ttitle: '京东首页',\r\n\t\t},\r\n\t},\r\n\t{\r\n\t\tpath: '/Home',\r\n\t\tredirect: {\r\n\t\t\tname: 'Home',\r\n\t\t},\r\n\t},\r\n\t{\r\n\t\tpath: '/sort',\r\n\t\tname: 'Sort',\r\n\t\tcomponent: () => import('views/Sort/Sort.vue'),\r\n\t},\r\n\t{\r\n\t\tpath: '/cart',\r\n\t\tname: 'Cart',\r\n\t\tcomponent: () => import('views/Cart/Cart.vue'),\r\n\t},\r\n\t{\r\n\t\tpath: '/profile',\r\n\t\tname: 'Profile',\r\n\t\tcomponent: () => import('views/Profile/Profile.vue'),\r\n\t\tmeta: {\r\n\t\t\tverifyLogin: true,\r\n\t\t},\r\n\t},\r\n\t{\r\n\t\tpath: '/product/:iid',\r\n\t\tname: 'Product',\r\n\t\tcomponent: () => import('views/Product/Product.vue'),\r\n\t},\r\n\t{\r\n\t\tpath: '/login',\r\n\t\tname: 'Login',\r\n\t\tcomponent: () => import('views/Login/Login.vue'),\r\n\t},\r\n\t{\r\n\t\tpath: '/register',\r\n\t\tname: 'Register',\r\n\t\tcomponent: () => import('views/Register/Register.vue'),\r\n\t},\r\n];\r\n\r\nconst router = new VueRouter({\r\n\t// mode: 'history',\r\n\tbase: process.env.BASE_URL,\r\n\troutes,\r\n});\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n\tdocument.title = to.meta.title || '京东超市';\r\n\r\n\t// 路由跳转时的登录验证\r\n\tif (to.meta.verifyLogin) {\r\n\t\tif (hasCookie('isLogin')) {\r\n\t\t\tnext();\r\n\t\t} else {\r\n\t\t\tnext({\r\n\t\t\t\tname: 'Login',\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tnext();\r\n});\r\n\r\n// 防止路由连续点击两次的报错\r\nconst originPush = VueRouter.prototype.push;\r\nVueRouter.prototype.push = function push(location) {\r\n\t// 加上catch捕捉错误就不会报错\r\n\treturn originPush.call(this, location).catch((err) => err);\r\n};\r\n\r\nexport default router;\r\n","import { request } from '../index.js';\r\nimport { hasCookie } from 'common/cookieAPI.js';\r\n\r\nif (!localStorage.getItem('cartStore')) {\r\n\tlocalStorage.setItem('cartStore', '[]');\r\n}\r\n\r\nif (!localStorage.getItem('temporaryCartList')) {\r\n\tlocalStorage.setItem('temporaryCartList', '[]');\r\n}\r\n\r\n// 模拟请求函数\r\nasync function makeRequest() {\r\n\treturn await request('/updateCartList')\r\n\t\t.then((res) => res.json())\r\n\t\t.catch((e) => {\r\n\t\t\tthrow new Error(e);\r\n\t\t});\r\n}\r\n\r\n/**\r\n * 模拟API\r\n */\r\n\r\n// 获取cartList数据\r\nexport async function requestCartList() {\r\n\tawait makeRequest();\r\n\r\n\treturn getCartList();\r\n}\r\n\r\n// 添加商品\r\nexport async function addProduct(shopDetail, productDetail) {\r\n\t// 设置一些默认的选项\r\n\tproductDetail = Object.assign(\r\n\t\t{\r\n\t\t\tselected: true,\r\n\t\t},\r\n\t\tproductDetail\r\n\t);\r\n\tshopDetail = Object.assign(\r\n\t\t{\r\n\t\t\tselected: true,\r\n\t\t\tlist: [productDetail],\r\n\t\t},\r\n\t\tshopDetail\r\n\t);\r\n\r\n\tconst { cartList } = getCartList();\r\n\r\n\tconst { proIndex } = findProductIndex(\r\n\t\tshopDetail.shopsIid,\r\n\t\tproductDetail.productIid\r\n\t);\r\n\tconst { shopIndex } = findShopIndex(shopDetail.shopsIid);\r\n\r\n\t// 判断一下购物车里是否有相同的商品\r\n\tif (proIndex) {\r\n\t\t// 有的或直接更新该商品的数据\r\n\t\tcartList[shopIndex].list[proIndex] = productDetail;\r\n\t} else if (shopIndex) {\r\n\t\t// 如果是有相同的商铺 就添加到商铺的列表下\r\n\t\tcartList[shopIndex].list.push(productDetail);\r\n\t} else {\r\n\t\t// 什么都没有就添加新的列表\r\n\t\tcartList.push(shopDetail);\r\n\t}\r\n\r\n\treturn await updateCartList(cartList);\r\n}\r\n\r\n// 删除商品\r\nexport async function deleteProduct(shopIid, productIid) {\r\n\tconst { cartList } = getCartList();\r\n\tconst { shopIndex, proIndex } = findProductIndex(shopIid, productIid);\r\n\r\n\tcartList[shopIndex].list.splice(proIndex, 1);\r\n\r\n\t// 当前店铺下没有商品时 执行垃圾回收机制\r\n\tif (!cartList[shopIndex].list.length) {\r\n\t\tcartList.splice(shopIndex, 1);\r\n\t}\r\n\r\n\treturn await updateCartList(cartList);\r\n}\r\n\r\n// 注册新用户的购物车列表\r\nexport async function registerNewCartList(username) {\r\n\tconst cartStore = getCartStore();\r\n\r\n\tcartStore.push({\r\n\t\tusername,\r\n\t\tcartList: [],\r\n\t});\r\n\r\n\tawait updateCartStore(cartStore);\r\n\r\n\treturn getCartList();\r\n}\r\n\r\n// 更新商品数据\r\nexport async function changeProductProperty(key, value, shopIid, productIid) {\r\n\tconst { cartList } = getCartList();\r\n\r\n\tconst { shopIndex, proIndex } = findProductIndex(shopIid, productIid);\r\n\r\n\tif (!shopIndex && !proIndex) {\r\n\t\tthrow new Error('没有此商品');\r\n\t}\r\n\r\n\tcartList[shopIndex].list[proIndex][key] = value;\r\n\r\n\treturn await updateCartList(cartList);\r\n}\r\n\r\n// 更新商家数据\r\nexport async function changeShopProperty(key, value, shopIid) {\r\n\tconst { cartList } = getCartList();\r\n\tconst { shopIndex } = findShopIndex(shopIid);\r\n\r\n\tcartList[shopIndex][key] = value;\r\n\r\n\treturn await updateCartList(cartList);\r\n}\r\n\r\nexport async function getProduct(shopIid, productIid) {\r\n\tawait makeRequest();\r\n\r\n\tconst { cartList } = getCartList();\r\n\tconst { shopIndex, proIndex } = findProductIndex(shopIid, productIid);\r\n\r\n\treturn cartList[shopIndex].list[proIndex];\r\n}\r\n\r\n/**\r\n * 以下是工具函数\r\n */\r\n\r\n// 获取当前用户的cartList数据\r\nfunction getCartList() {\r\n\tconst username = getUsername();\r\n\tconst cartStore = getCartStore();\r\n\r\n\tfor (const index in cartStore) {\r\n\t\tconst item = cartStore[index];\r\n\r\n\t\tif (item.username === username) {\r\n\t\t\treturn {\r\n\t\t\t\tcartList: item.cartList,\r\n\t\t\t\tindex,\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\tconst temporaryCartList = JSON.parse(\r\n\t\tlocalStorage.getItem('temporaryCartList')\r\n\t);\r\n\r\n\t// 未登录状态返回临时存储文件\r\n\treturn {\r\n\t\tcartList: temporaryCartList,\r\n\t\tindex: 0,\r\n\t};\r\n}\r\n\r\n// 获取cartStore的数据\r\nfunction getCartStore() {\r\n\treturn JSON.parse(localStorage.getItem('cartStore'));\r\n}\r\n\r\nfunction getTemporaryCartList() {\r\n\treturn JSON.parse(localStorage.getItem('temporaryCartList'));\r\n}\r\n\r\n// 获取当前用户名\r\nfunction getUsername() {\r\n\treturn localStorage.getItem('username');\r\n}\r\n\r\n// 找到指定的商品数据\r\nfunction findProductIndex(shopIid, productIid) {\r\n\tconst { cartList } = getCartList();\r\n\r\n\tfor (const shopIndex in cartList) {\r\n\t\tconst shop = cartList[shopIndex];\r\n\r\n\t\tif (shop.shopsIid === shopIid) {\r\n\t\t\tfor (const proIndex in shop.list) {\r\n\t\t\t\tconst pro = shop.list[proIndex];\r\n\r\n\t\t\t\tif (pro.productIid === productIid) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tshopIndex,\r\n\t\t\t\t\t\tproIndex,\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn {};\r\n}\r\n\r\n// 找到指定的商家数据\r\nfunction findShopIndex(shopIid) {\r\n\tconst { cartList } = getCartList();\r\n\r\n\tfor (const shopIndex in cartList) {\r\n\t\tconst shop = cartList[shopIndex];\r\n\r\n\t\tif (shop.shopsIid === shopIid) {\r\n\t\t\treturn {\r\n\t\t\t\tshopIndex,\r\n\t\t\t\tshop,\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\treturn {};\r\n}\r\n\r\n// 更新cartList的数据\r\nasync function updateCartList(cartList) {\r\n\tawait makeRequest();\r\n\r\n\t// 未登录状态\r\n\tif (!hasCookie('isLogin')) {\r\n\t\tlocalStorage.setItem('temporaryCartList', JSON.stringify(cartList));\r\n\t\treturn getCartList();\r\n\t}\r\n\r\n\tconst cartStore = getCartStore();\r\n\tconst { index } = getCartList();\r\n\r\n\tcartStore[index].cartList = cartList;\r\n\r\n\tlocalStorage.setItem('cartStore', JSON.stringify(cartStore));\r\n\r\n\treturn getCartList();\r\n}\r\n\r\n// 更新cartStore数据\r\nasync function updateCartStore(cartStore) {\r\n\tawait makeRequest();\r\n\r\n\tlocalStorage.setItem('cartStore', JSON.stringify(cartStore));\r\n\r\n\treturn getCartStore();\r\n}\r\n","import {\r\n\taddProduct,\r\n\trequestCartList,\r\n\tchangeProductProperty,\r\n\tchangeShopProperty,\r\n\tdeleteProduct,\r\n\tregisterNewCartList,\r\n} from 'network/cartList/index.js';\r\n\r\nexport default {\r\n\tnamespaced: true,\r\n\r\n\tstate() {\r\n\t\treturn {\r\n\t\t\tcartList: [],\r\n\t\t\tproductNum: 0,\r\n\t\t\tindex: '',\r\n\t\t\tskuShow: false,\r\n\t\t\tskuDetail: {},\r\n\t\t};\r\n\t},\r\n\tmutations: {\r\n\t\tupdateCartList(state, cartList) {\r\n\t\t\tstate.cartList = cartList;\r\n\t\t},\r\n\r\n\t\tsetProperty(state, [key, value]) {\r\n\t\t\tstate[key] = value;\r\n\t\t},\r\n\t},\r\n\tactions: {\r\n\t\tasync registerCartList({ commit }, [username]) {\r\n\t\t\tconst { cartList } = await registerNewCartList(username);\r\n\r\n\t\t\tcommit('updateCartList', cartList);\r\n\t\t},\r\n\r\n\t\t// 添加商品\r\n\t\tasync addProduct({\r\n\t\t\tcommit,\r\n\t\t\tdispatch,\r\n\t\t\trootState: {\r\n\t\t\t\tproduct: {\r\n\t\t\t\t\tselectedSkuComb,\r\n\t\t\t\t\tskuData,\r\n\t\t\t\t\tproductIid,\r\n\t\t\t\t\ttitle,\r\n\t\t\t\t\tselectedNum,\r\n\t\t\t\t\tshop,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t}) {\r\n\t\t\tawait dispatch(\r\n\t\t\t\t'changeIsLoading',\r\n\t\t\t\tasync () => {\r\n\t\t\t\t\tconst { cartList } = await addProduct(shop, {\r\n\t\t\t\t\t\tselectedSkuComb,\r\n\t\t\t\t\t\tskuData,\r\n\t\t\t\t\t\tproductIid,\r\n\t\t\t\t\t\ttitle,\r\n\t\t\t\t\t\tselectedNum,\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tcommit('updateCartList', cartList);\r\n\t\t\t\t},\r\n\t\t\t\t{ root: true }\r\n\t\t\t);\r\n\t\t},\r\n\r\n\t\t// 删除商品\r\n\t\tasync deleteProduct({ commit, dispatch }, [shopIid, productIid]) {\r\n\t\t\tawait dispatch(\r\n\t\t\t\t'changeIsLoading',\r\n\t\t\t\tasync () => {\r\n\t\t\t\t\tconst { cartList } = await deleteProduct(\r\n\t\t\t\t\t\tshopIid,\r\n\t\t\t\t\t\tproductIid\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tcommit('updateCartList', cartList);\r\n\t\t\t\t},\r\n\t\t\t\t{ root: true }\r\n\t\t\t);\r\n\t\t},\r\n\r\n\t\t// 更改商品数据\r\n\t\tasync changeProductProperty(\r\n\t\t\t{ commit, dispatch },\r\n\t\t\t[key, value, shopIid, productIid]\r\n\t\t) {\r\n\t\t\tawait dispatch(\r\n\t\t\t\t'changeIsLoading',\r\n\t\t\t\tasync () => {\r\n\t\t\t\t\tconst { cartList } = await changeProductProperty(\r\n\t\t\t\t\t\tkey,\r\n\t\t\t\t\t\tvalue,\r\n\t\t\t\t\t\tshopIid,\r\n\t\t\t\t\t\tproductIid\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tcommit('updateCartList', cartList);\r\n\t\t\t\t},\r\n\t\t\t\t{ root: true }\r\n\t\t\t);\r\n\t\t},\r\n\r\n\t\t// 更改店铺数据\r\n\t\tasync changeShopProperty({ commit }, [key, value, shopIid]) {\r\n\t\t\tconst { cartList } = await changeShopProperty(key, value, shopIid);\r\n\r\n\t\t\tcommit('updateCartList', cartList);\r\n\t\t},\r\n\r\n\t\t// 请求购物车数据\r\n\t\tasync requestCartList({ commit, dispatch }) {\r\n\t\t\tlet cartList = [];\r\n\r\n\t\t\tawait dispatch(\r\n\t\t\t\t'changeIsLoading',\r\n\t\t\t\tasync () => {\r\n\t\t\t\t\tcartList = (await requestCartList()).cartList;\r\n\t\t\t\t},\r\n\t\t\t\t{ root: true }\r\n\t\t\t);\r\n\r\n\t\t\tcommit('updateCartList', cartList);\r\n\t\t},\r\n\r\n\t\t// 打开购物车商品sku弹窗\r\n\t\tchangeSkuDetail({ commit, getters }, [shopIid, proIid] = []) {\r\n\t\t\tconst {\r\n\t\t\t\tshop,\r\n\t\t\t\tpro: { skuData, productIid, selectedSkuComb },\r\n\t\t\t} = getters.getProduct(shopIid, proIid);\r\n\r\n\t\t\tcommit('setProperty', [\r\n\t\t\t\t'skuDetail',\r\n\t\t\t\t{\r\n\t\t\t\t\tskuData,\r\n\t\t\t\t\tproductIid,\r\n\t\t\t\t\tselectedSkuComb,\r\n\t\t\t\t\tshopIid: shop.shopsIid,\r\n\t\t\t\t},\r\n\t\t\t]);\r\n\t\t},\r\n\r\n\t\t// 更改商铺的选中\r\n\t\tasync changeShopSelected(\r\n\t\t\t{ commit, dispatch, getters },\r\n\t\t\t[shopIid, value]\r\n\t\t) {\r\n\t\t\tawait dispatch(\r\n\t\t\t\t'changeIsLoading',\r\n\t\t\t\tasync () => {\r\n\t\t\t\t\tawait dispatch('changeShopProperty', [\r\n\t\t\t\t\t\t'selected',\r\n\t\t\t\t\t\tvalue,\r\n\t\t\t\t\t\tshopIid,\r\n\t\t\t\t\t]);\r\n\r\n\t\t\t\t\tconst { shop } = getters.getShop(shopIid);\r\n\r\n\t\t\t\t\t// 根据商铺的选择 全选或者取消子商品\r\n\t\t\t\t\tfor (const pro of shop.list) {\r\n\t\t\t\t\t\tpro.selected = shop.selected;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst { cartList } = await changeShopProperty(\r\n\t\t\t\t\t\t'list',\r\n\t\t\t\t\t\tshop.list,\r\n\t\t\t\t\t\tshopIid\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tcommit('updateCartList', cartList);\r\n\t\t\t\t},\r\n\t\t\t\t{ root: true }\r\n\t\t\t);\r\n\t\t},\r\n\r\n\t\t// 更改商品的选中\r\n\t\tasync changeProductSelected(\r\n\t\t\t{ commit, dispatch, getters },\r\n\t\t\t[shopIid, productIid, value]\r\n\t\t) {\r\n\t\t\tawait dispatch(\r\n\t\t\t\t'changeIsLoading',\r\n\t\t\t\tasync () => {\r\n\t\t\t\t\tlet cartList = [];\r\n\r\n\t\t\t\t\tcartList = (\r\n\t\t\t\t\t\tawait changeProductProperty(\r\n\t\t\t\t\t\t\t'selected',\r\n\t\t\t\t\t\t\tvalue,\r\n\t\t\t\t\t\t\tshopIid,\r\n\t\t\t\t\t\t\tproductIid\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t).cartList;\r\n\r\n\t\t\t\t\t// 如果此商品是商铺内的第一个商品 将商品的选中变为true\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tgetters.productHasAllSelected(\r\n\t\t\t\t\t\t\tshopIid,\r\n\t\t\t\t\t\t\tgetters.getShop(shopIid, cartList).shop\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tcartList = (\r\n\t\t\t\t\t\t\tawait changeShopProperty('selected', true, shopIid)\r\n\t\t\t\t\t\t).cartList;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// 如果商铺内没有选中的商品 将商品的选中变为false\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tgetters.productHasNotSelected(\r\n\t\t\t\t\t\t\tshopIid,\r\n\t\t\t\t\t\t\tgetters.getShop(shopIid, cartList).shop\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tcartList = (\r\n\t\t\t\t\t\t\tawait changeShopProperty('selected', false, shopIid)\r\n\t\t\t\t\t\t).cartList;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcommit('updateCartList', cartList);\r\n\t\t\t\t},\r\n\t\t\t\t{ root: true }\r\n\t\t\t);\r\n\t\t},\r\n\r\n\t\t// 全选\r\n\t\tasync checkAll({ dispatch, getters, state: { cartList } }) {\r\n\t\t\tfor (const shop of cartList) {\r\n\t\t\t\tawait dispatch('changeShopSelected', [\r\n\t\t\t\t\tshop.shopsIid,\r\n\t\t\t\t\t!getters.isCheckAll,\r\n\t\t\t\t]);\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tgetters: {\r\n\t\tisCheckAll({ cartList }) {\r\n\t\t\tif (!cartList || !cartList.length) return false;\r\n\r\n\t\t\treturn cartList.every(({ list }) =>\r\n\t\t\t\tlist.every(({ selected }) => selected)\r\n\t\t\t);\r\n\t\t},\r\n\r\n\t\tproductTotal({ cartList }) {\r\n\t\t\tif (!cartList || !cartList.length) return 0;\r\n\r\n\t\t\treturn cartList.reduce((num, { list }) => {\r\n\t\t\t\treturn list.reduce(\r\n\t\t\t\t\t(\r\n\t\t\t\t\t\tnum,\r\n\t\t\t\t\t\t{ selected, selectedSkuComb: { price }, selectedNum }\r\n\t\t\t\t\t) => {\r\n\t\t\t\t\t\tif (selected) return num + Number(price) * selectedNum;\r\n\r\n\t\t\t\t\t\treturn num;\r\n\t\t\t\t\t},\r\n\t\t\t\t\t0\r\n\t\t\t\t);\r\n\t\t\t}, 0);\r\n\t\t},\r\n\r\n\t\tgetProductNumber({ cartList }) {\r\n\t\t\treturn cartList.reduce((num, { list }) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tnum +\r\n\t\t\t\t\tlist.reduce((num, { selected }) => {\r\n\t\t\t\t\t\treturn num + 1;\r\n\t\t\t\t\t}, 0)\r\n\t\t\t\t);\r\n\t\t\t}, 0);\r\n\t\t},\r\n\r\n\t\tgetProduct({ cartList }) {\r\n\t\t\treturn (shopIid, proIid) => {\r\n\t\t\t\tfor (const shopIndex in cartList) {\r\n\t\t\t\t\tconst shop = cartList[shopIndex];\r\n\r\n\t\t\t\t\tif (shop.shopsIid === shopIid) {\r\n\t\t\t\t\t\tfor (const proIndex in shop.list) {\r\n\t\t\t\t\t\t\tconst pro = shop.list[proIndex];\r\n\r\n\t\t\t\t\t\t\tif (pro.productIid === proIid) {\r\n\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\tshopIndex,\r\n\t\t\t\t\t\t\t\t\tshop,\r\n\t\t\t\t\t\t\t\t\tproIndex,\r\n\t\t\t\t\t\t\t\t\tpro,\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn {};\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tgetShop({ cartList }) {\r\n\t\t\treturn (shopIid, otherList = cartList) => {\r\n\t\t\t\tfor (const shopIndex in otherList) {\r\n\t\t\t\t\tconst shop = otherList[shopIndex];\r\n\r\n\t\t\t\t\tif (shop.shopsIid === shopIid) {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tshopIndex,\r\n\t\t\t\t\t\t\tshop,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn {};\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tproductHasAllSelected(state, getters) {\r\n\t\t\treturn (shopIid, shop = getters.getShop(shopIid).shop) => {\r\n\t\t\t\treturn shop.list.every(({ selected }) => selected);\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tproductHasNotSelected(state, getters) {\r\n\t\t\treturn (shopIid, shop = getters.getShop(shopIid).shop) => {\r\n\t\t\t\treturn shop.list.every(({ selected }) => !selected);\r\n\t\t\t};\r\n\t\t},\r\n\t},\r\n};\r\n","export default {\r\n\tnamespaced: true,\r\n\r\n\tstate() {\r\n\t\treturn {\r\n\t\t\tselectedSkuComb: {},\r\n\t\t\tselectedNum: 1,\r\n\t\t\tproductIid: NaN,\r\n\t\t\ttopSwipe: [],\r\n\t\t\tprice: {},\r\n\t\t\ttitle: {},\r\n\t\t\tcoupon: {},\r\n\t\t\tskuData: {},\r\n\t\t\taddress: {},\r\n\t\t\tserviceArea: [],\r\n\t\t\tshop: {},\r\n\t\t\tshowSku: false,\r\n\t\t};\r\n\t},\r\n\tmutations: {\r\n\t\tupdateSelectedSkuComb(state, newValue) {\r\n\t\t\tstate.selectedSkuComb = newValue;\r\n\t\t},\r\n\t\tupdateSelectedNum(state, newValue) {\r\n\t\t\tstate.selectedNum = newValue;\r\n\t\t},\r\n\t\tchangeShowSku(state, value) {\r\n\t\t\tstate.showSku = value;\r\n\t\t},\r\n\r\n\t\tchangeProperty(state, [key, value]) {\r\n\t\t\tstate[key] = value;\r\n\t\t},\r\n\r\n\t\taddState(state, newValue) {\r\n\t\t\tfor (const prop in newValue) {\r\n\t\t\t\tstate[prop] = newValue[prop];\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tactions: {\r\n\t\tfindSelectedImage({ state: { selectedSkuComb, skuData } }) {\r\n\t\t\tconst obj = selectedSkuComb;\r\n\r\n\t\t\tif (!obj) return;\r\n\r\n\t\t\tconst key = Object.keys(obj).filter((item) => item === 's1')[0];\r\n\t\t\tconst value = obj[key];\r\n\r\n\t\t\tfor (const prop of skuData.sku.tree) {\r\n\t\t\t\tif (String(prop.k_s) === key) {\r\n\t\t\t\t\tfor (const v of prop.v) {\r\n\t\t\t\t\t\tif (v.id === value) {\r\n\t\t\t\t\t\t\treturn v.previewImgUrl;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tgetters: {\r\n\t\tgetSelectedImage({ selectedSkuComb: { s1 }, skuData }) {\r\n\t\t\tif (!Object.keys(skuData).length) return;\r\n\r\n\t\t\tconst value = skuData.sku.tree[0].v;\r\n\r\n\t\t\tfor (const item of value) {\r\n\t\t\t\tif (item.id === s1) {\r\n\t\t\t\t\treturn item.previewImgUrl;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n};\r\n","import { request } from '../index.js';\r\nimport {\r\n\thasCookie,\r\n\tremoveCookie,\r\n\tsetCookie,\r\n\tgetCookie,\r\n} from 'common/cookieAPI.js';\r\n\r\n// 模拟请求函数\r\nasync function makeRequest() {\r\n\treturn await request('/updateLogin')\r\n\t\t.then((res) => res.json())\r\n\t\t.catch((e) => {\r\n\t\t\tthrow new Error(e);\r\n\t\t});\r\n}\r\n\r\n/**\r\n * 模拟API\r\n */\r\nexport async function requestLogin() {\r\n\treturn getIsLogin();\r\n}\r\n\r\nexport async function login(username) {\r\n\tawait makeRequest();\r\n\r\n\tsetLogin('true');\r\n\r\n\tsetUsername(username);\r\n\r\n\treturn getIsLogin();\r\n}\r\n\r\n// 删除完后需要reload\r\nexport async function logout() {\r\n\tawait makeRequest();\r\n\r\n\tremoveLogin();\r\n\r\n\tsetUsername('');\r\n\r\n\treturn getIsLogin();\r\n}\r\n\r\n/**\r\n * 工具函数\r\n */\r\n\r\nfunction getIsLogin() {\r\n\treturn getCookie('isLogin');\r\n}\r\n\r\nfunction setLogin(value) {\r\n\tsetCookie('isLogin', value, 99999);\r\n}\r\n\r\nfunction removeLogin() {\r\n\tremoveCookie('isLogin');\r\n}\r\n\r\nfunction setUsername(username) {\r\n\tlocalStorage.setItem('username', username);\r\n}\r\n","import { login, logout, requestLogin } from 'network/login/index.js';\r\n\r\nexport default {\r\n\tnamespaced: true,\r\n\r\n\tstate() {\r\n\t\treturn {\r\n\t\t\tisLogin: false,\r\n\t\t};\r\n\t},\r\n\tmutations: {\r\n\t\tupdateIsLogin(state, value) {\r\n\t\t\tstate.isLogin = value;\r\n\t\t},\r\n\t},\r\n\tactions: {\r\n\t\t// 请求isLogin信息\r\n\t\tasync requestLogin({ commit }) {\r\n\t\t\tcommit('updateIsLogin', await requestLogin());\r\n\t\t},\r\n\r\n\t\t// 注册\r\n\t\tasync register({ dispatch }, newUserList) {\r\n\t\t\t// 注册购物车，历史记录什么的\r\n\r\n\t\t\tawait dispatch('userData/registerNewUser', newUserList, {\r\n\t\t\t\troot: true,\r\n\t\t\t});\r\n\r\n\t\t\tawait dispatch(\r\n\t\t\t\t'cartList/registerCartList',\r\n\t\t\t\t[newUserList.username],\r\n\t\t\t\t{\r\n\t\t\t\t\troot: true,\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tawait dispatch(\r\n\t\t\t\t'collection/registerNewCollection',\r\n\t\t\t\t[newUserList.username],\r\n\t\t\t\t{\r\n\t\t\t\t\troot: true,\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tawait dispatch(\r\n\t\t\t\t'history/registerNewHistory',\r\n\t\t\t\t[newUserList.username],\r\n\t\t\t\t{\r\n\t\t\t\t\troot: true,\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\t// 注册完后立刻登录\r\n\t\t\tawait dispatch('login', newUserList.username);\r\n\t\t},\r\n\r\n\t\t// 登录\r\n\t\tasync login({ commit, dispatch }, username) {\r\n\t\t\tawait dispatch(\r\n\t\t\t\t'changeIsLoading',\r\n\t\t\t\tasync () => {\r\n\t\t\t\t\tcommit('updateIsLogin', await login(username));\r\n\t\t\t\t},\r\n\t\t\t\t{ root: true }\r\n\t\t\t);\r\n\t\t},\r\n\r\n\t\t// 登出\r\n\t\tasync logout({ commit, dispatch }) {\r\n\t\t\tawait dispatch(\r\n\t\t\t\t'changeIsLoading',\r\n\t\t\t\tasync () => {\r\n\t\t\t\t\tcommit('updateIsLogin', await logout());\r\n\t\t\t\t},\r\n\t\t\t\t{ root: true }\r\n\t\t\t);\r\n\t\t},\r\n\t},\r\n\tgetters: {\r\n\t\t// 检查是否有重复的属性\r\n\t\tcheckHasRepeat(state, getters, { userData: { userStore } }) {\r\n\t\t\treturn (key, value) => {\r\n\t\t\t\treturn userStore.some((item) => {\r\n\t\t\t\t\treturn item[key] === value;\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\t// 检查是否没有重读的属性\r\n\t\tcheckHasNoRepeat(state, getters, { userData: { userStore } }) {\r\n\t\t\treturn (key, value) => {\r\n\t\t\t\treturn userStore.every((item) => item[key] !== value);\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\t// 登录的密码检测\r\n\t\tcheckPassword(state, getters, { userData: { userStore } }) {\r\n\t\t\treturn (username, password) => {\r\n\t\t\t\treturn userStore.some((item) => {\r\n\t\t\t\t\tif (item.username === username) {\r\n\t\t\t\t\t\treturn item.password === password;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t},\r\n\t},\r\n};\r\n","import { hasCookie } from 'common/cookieAPI';\r\nimport { request } from '../index.js';\r\n\r\nif (!JSON.parse(localStorage.getItem('collectionStore'))) {\r\n\tlocalStorage.setItem('collectionStore', '[]');\r\n}\r\n\r\nif (!JSON.parse(localStorage.getItem('temporaryCollection'))) {\r\n\tlocalStorage.setItem(\r\n\t\t'temporaryCollection',\r\n\t\tJSON.stringify([\r\n\t\t\t{\r\n\t\t\t\tshopCollection: [],\r\n\t\t\t\tproductCollection: [],\r\n\t\t\t},\r\n\t\t])\r\n\t);\r\n}\r\n\r\n// 模拟请求函数\r\nasync function makeRequest() {\r\n\treturn await request('/updateCollection')\r\n\t\t.then((res) => res.json())\r\n\t\t.catch((e) => {\r\n\t\t\tthrow new Error(e);\r\n\t\t});\r\n}\r\n\r\n/**\r\n * 模拟请求API\r\n */\r\n\r\nexport async function requestCollection() {\r\n\tawait makeRequest();\r\n\r\n\tconst { shopCollection } = getShopCollection();\r\n\r\n\tconst { productCollection } = getProductCollection();\r\n\r\n\treturn {\r\n\t\tshopCollection,\r\n\t\tproductCollection,\r\n\t};\r\n}\r\n\r\nexport async function addProductCollection(detail) {\r\n\tconst { productCollection } = getProductCollection();\r\n\r\n\tproductCollection.push(detail);\r\n\r\n\treturn await updateProductCollection(productCollection);\r\n}\r\n\r\nexport async function addShopCollection(detail) {\r\n\tconst { shopCollection } = getShopCollection();\r\n\r\n\tshopCollection.push(detail);\r\n\r\n\treturn await updateShopCollection(shopCollection);\r\n}\r\n\r\nexport async function removeProductCollection(proIid) {\r\n\tconst index = getProductIndex(proIid);\r\n\tconst { productCollection } = getProductCollection();\r\n\r\n\tproductCollection.splice(index, 1);\r\n\r\n\treturn await updateProductCollection(productCollection);\r\n}\r\n\r\nexport async function registerNewCollection(username) {\r\n\tconst collectionStore = getCollectionStore();\r\n\r\n\tcollectionStore.push({\r\n\t\tusername,\r\n\t\tshopCollection: [],\r\n\t\tproductCollection: [],\r\n\t});\r\n\r\n\treturn await updateCollectionStore(collectionStore);\r\n}\r\n\r\n/**\r\n * 工具函数\r\n */\r\n\r\nfunction getProductCollection() {\r\n\tconst username = getUsername();\r\n\tconst collectionStore = getCollectionStore();\r\n\r\n\tfor (const index in collectionStore) {\r\n\t\tconst collection = collectionStore[index];\r\n\r\n\t\tif (collection.username === username) {\r\n\t\t\treturn {\r\n\t\t\t\tproductCollection: collection.productCollection,\r\n\t\t\t\tindex,\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\tconst temporaryProductCollection = getTemporaryCollection()[0]\r\n\t\t.productCollection;\r\n\r\n\treturn {\r\n\t\tproductCollection: temporaryProductCollection,\r\n\t\tindex: 0,\r\n\t};\r\n}\r\n\r\nfunction getShopCollection() {\r\n\tconst username = getUsername();\r\n\tconst collectionStore = getCollectionStore();\r\n\r\n\tfor (const index in collectionStore) {\r\n\t\tconst collection = collectionStore[index];\r\n\r\n\t\tif (collectionStore.username === username) {\r\n\t\t\treturn {\r\n\t\t\t\tshopCollection: collection.shopCollection,\r\n\t\t\t\tindex,\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\tconst temporaryShopCollection = JSON.parse(\r\n\t\tlocalStorage.getItem('temporaryCollection')\r\n\t)[0].shopCollection;\r\n\r\n\treturn {\r\n\t\tshopCollection: temporaryShopCollection,\r\n\t\tindex: 0,\r\n\t};\r\n}\r\n\r\nfunction getCollectionStore() {\r\n\treturn JSON.parse(localStorage.getItem('collectionStore'));\r\n}\r\n\r\nfunction getTemporaryCollection() {\r\n\treturn JSON.parse(localStorage.getItem('temporaryCollection'));\r\n}\r\n\r\nfunction getUsername() {\r\n\treturn localStorage.getItem('username');\r\n}\r\n\r\nfunction getProductIndex(proIid) {\r\n\tconst collection = getCollectionStore();\r\n\r\n\tfor (const proIndex in collection) {\r\n\t\tconst pro = collection[proIndex];\r\n\r\n\t\tif (Number(pro.productIid) === Number(proIid)) {\r\n\t\t\treturn proIndex;\r\n\t\t}\r\n\t}\r\n\r\n\treturn false;\r\n}\r\n\r\nasync function updateProductCollection(newCollection) {\r\n\tawait makeRequest();\r\n\r\n\tconst { index } = getProductCollection();\r\n\tconst collectionStore = hasCookie('isLogin')\r\n\t\t? getCollectionStore()\r\n\t\t: getTemporaryCollection();\r\n\r\n\tcollectionStore[index].productCollection = newCollection;\r\n\r\n\tif (hasCookie('isLogin')) {\r\n\t\tlocalStorage.setItem(\r\n\t\t\t'collectionStore',\r\n\t\t\tJSON.stringify(collectionStore)\r\n\t\t);\r\n\t} else {\r\n\t\tlocalStorage.setItem(\r\n\t\t\t'temporaryCollection',\r\n\t\t\tJSON.stringify(collectionStore)\r\n\t\t);\r\n\t}\r\n\r\n\treturn getProductCollection();\r\n}\r\n\r\nasync function updateShopCollection(newCollection) {\r\n\tawait makeRequest();\r\n\r\n\tconst { index } = getShopCollection();\r\n\tconst collectionStore = hasCookie('isLogin')\r\n\t\t? getCollectionStore()\r\n\t\t: getTemporaryCollection();\r\n\r\n\tcollectionStore[index].shopCollection = newCollection;\r\n\r\n\tif (!hasCookie('isLogin')) {\r\n\t\tlocalStorage.setItem(\r\n\t\t\t'collectionStore',\r\n\t\t\tJSON.stringify(collectionStore)\r\n\t\t);\r\n\t} else {\r\n\t\tlocalStorage.setItem(\r\n\t\t\t'temporaryCollection',\r\n\t\t\tJSON.stringify(collectionStore)\r\n\t\t);\r\n\t}\r\n\r\n\treturn getShopCollection();\r\n}\r\n\r\nasync function updateCollectionStore(newCollectionStore) {\r\n\tawait makeRequest();\r\n\r\n\tlocalStorage.setItem('collectionStore', JSON.stringify(newCollectionStore));\r\n\r\n\treturn {\r\n\t\tshopCollection: getShopCollection().shopCollection,\r\n\t\tproductCollection: getProductCollection().productCollection,\r\n\t};\r\n}\r\n","import {\r\n\trequestCollection,\r\n\taddProductCollection,\r\n\taddShopCollection,\r\n\tregisterNewCollection,\r\n\tremoveProductCollection,\r\n} from 'network/collection/index.js';\r\n\r\nexport default {\r\n\tnamespaced: true,\r\n\r\n\tstate() {\r\n\t\treturn {\r\n\t\t\tproductCollection: [],\r\n\t\t\tshopCollection: [],\r\n\t\t};\r\n\t},\r\n\tmutations: {\r\n\t\tupdateProductCollection(state, newCollection) {\r\n\t\t\tstate.productCollection = newCollection;\r\n\t\t},\r\n\r\n\t\tupdateShopCollection(state, newCollection) {\r\n\t\t\tstate.shopCollection = newCollection;\r\n\t\t},\r\n\t},\r\n\tactions: {\r\n\t\tasync requestCollection({ commit }) {\r\n\t\t\tconst {\r\n\t\t\t\tshopCollection,\r\n\t\t\t\tproductCollection,\r\n\t\t\t} = await requestCollection();\r\n\r\n\t\t\tcommit('updateProductCollection', productCollection);\r\n\r\n\t\t\tcommit('updateShopCollection', shopCollection);\r\n\t\t},\r\n\r\n\t\tasync addProductCollection({ commit }, newProductCollection) {\r\n\t\t\tconst { productCollection } = await addProductCollection(\r\n\t\t\t\tnewProductCollection\r\n\t\t\t);\r\n\r\n\t\t\tcommit('updateProductCollection', productCollection);\r\n\t\t},\r\n\r\n\t\tasync removeProductCollection({ commit }, proIid) {\r\n\t\t\tconst { productCollection } = await removeProductCollection(proIid);\r\n\r\n\t\t\tcommit('updateProductCollection', productCollection);\r\n\t\t},\r\n\r\n\t\tasync registerNewCollection({ commit }, [username]) {\r\n\t\t\tconst {\r\n\t\t\t\tshopCollection,\r\n\t\t\t\tproductCollection,\r\n\t\t\t} = await registerNewCollection(username);\r\n\r\n\t\t\tcommit('updateProductCollection', productCollection);\r\n\r\n\t\t\tcommit('updateShopCollection', shopCollection);\r\n\t\t},\r\n\t},\r\n\tgetters: {\r\n\t\tshopCollectionLength({ shopCollection }) {\r\n\t\t\treturn shopCollection.length;\r\n\t\t},\r\n\r\n\t\tproductCollectionLength({ productCollection }) {\r\n\t\t\treturn productCollection.length;\r\n\t\t},\r\n\r\n\t\thasProductCollection({ productCollection }) {\r\n\t\t\treturn (proIid) => {\r\n\t\t\t\tfor (const pro of productCollection) {\r\n\t\t\t\t\tif (Number(pro.productIid) === Number(proIid)) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t};\r\n\t\t},\r\n\t},\r\n};\r\n","import { request } from '../index.js';\r\nimport { hasCookie } from 'common/cookieAPI.js';\r\n\r\nif (!localStorage.getItem('historyStore')) {\r\n\tlocalStorage.setItem('historyStore', '[]');\r\n}\r\n\r\nif (!localStorage.getItem('temporaryHistory')) {\r\n\tlocalStorage.setItem(\r\n\t\t'temporaryHistory',\r\n\t\tJSON.stringify([\r\n\t\t\t{\r\n\t\t\t\thistory: [],\r\n\t\t\t},\r\n\t\t])\r\n\t);\r\n}\r\n\r\n// 模拟请求函数\r\nasync function makeRequest() {\r\n\treturn await request('/updateHistory')\r\n\t\t.then((res) => res.json())\r\n\t\t.catch((e) => {\r\n\t\t\tthrow new Error(e);\r\n\t\t});\r\n}\r\n\r\n/**\r\n * 模拟请求API\r\n */\r\n\r\n// 请求history数据\r\nexport async function requestHistory() {\r\n\tawait makeRequest();\r\n\r\n\treturn getHistory();\r\n}\r\n\r\n// 添加history数据\r\nexport async function addHistory(newHistory) {\r\n\tlet { history } = getHistory();\r\n\r\n\tif (checkHasRepeat(newHistory.productIid)) {\r\n\t\tconst res = await removeHistory(newHistory.productIid);\r\n\r\n\t\thistory = res.history;\r\n\t}\r\n\r\n\thistory.unshift(newHistory);\r\n\r\n\treturn await updateHistory(history);\r\n}\r\n\r\n// 删除history数据\r\nexport async function removeHistory(proIid) {\r\n\tconst { history } = getHistory();\r\n\tconst { proIndex } = getProductIndex(proIid);\r\n\r\n\thistory.splice(proIndex, 1);\r\n\r\n\treturn await updateHistory(history);\r\n}\r\n\r\nexport async function registerNewHistory(username) {\r\n\tconst historyStore = getHistoryStore();\r\n\r\n\thistoryStore.push({\r\n\t\tusername,\r\n\t\thistory: [],\r\n\t});\r\n\r\n\treturn await updateHistoryStore(historyStore);\r\n}\r\n\r\n/**\r\n * 工具函数\r\n */\r\n\r\nfunction getHistory() {\r\n\tconst username = getUsername();\r\n\tconst historyStore = getHistoryStore();\r\n\r\n\tfor (const historyIndex in historyStore) {\r\n\t\tconst history = historyStore[historyIndex];\r\n\r\n\t\tif (history.username === username) {\r\n\t\t\treturn {\r\n\t\t\t\thistory: history.history,\r\n\t\t\t\thistoryIndex,\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\tconst temporaryHistory = JSON.parse(\r\n\t\tlocalStorage.getItem('temporaryHistory')\r\n\t);\r\n\r\n\treturn {\r\n\t\thistory: temporaryHistory[0].history,\r\n\t\thistoryIndex: 0,\r\n\t};\r\n}\r\n\r\nfunction getHistoryStore() {\r\n\treturn JSON.parse(localStorage.getItem('historyStore'));\r\n}\r\n\r\nfunction getTemporaryHistory() {\r\n\treturn JSON.parse(localStorage.getItem('temporaryHistory'));\r\n}\r\n\r\nfunction getUsername() {\r\n\treturn localStorage.getItem('username');\r\n}\r\n\r\nfunction checkHasRepeat(proIid) {\r\n\tconst { history } = getHistory();\r\n\r\n\tfor (const proIndex in history) {\r\n\t\tconst pro = history[proIndex];\r\n\r\n\t\tif (Number(pro.productIid) === Number(proIid)) {\r\n\t\t\treturn {\r\n\t\t\t\tpro,\r\n\t\t\t\tproIndex,\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\treturn false;\r\n}\r\n\r\nfunction getProductIndex(proIid) {\r\n\tconst { history } = getHistory();\r\n\r\n\tfor (const proIndex in history) {\r\n\t\tconst pro = history[proIndex];\r\n\r\n\t\tif (Number(pro.productIid) === Number(proIid)) {\r\n\t\t\treturn {\r\n\t\t\t\tpro,\r\n\t\t\t\tproIndex,\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\treturn {};\r\n}\r\n\r\nasync function updateHistory(newHistory) {\r\n\tawait makeRequest();\r\n\r\n\tif (!hasCookie('isLogin')) {\r\n\t\tconst temporaryHistory = getTemporaryHistory();\r\n\r\n\t\ttemporaryHistory[0].history = newHistory;\r\n\r\n\t\tlocalStorage.setItem(\r\n\t\t\t'temporaryHistory',\r\n\t\t\tJSON.stringify(temporaryHistory)\r\n\t\t);\r\n\r\n\t\treturn getHistory();\r\n\t}\r\n\r\n\tconst historyStore = getHistoryStore();\r\n\tconst { historyIndex } = getHistory();\r\n\r\n\thistoryStore[historyIndex].history = newHistory;\r\n\r\n\tlocalStorage.setItem('historyStore', JSON.stringify(historyStore));\r\n\r\n\treturn getHistory();\r\n}\r\n\r\nasync function updateHistoryStore(newHistoryStore) {\r\n\tawait makeRequest();\r\n\r\n\tlocalStorage.setItem('historyStore', JSON.stringify(newHistoryStore));\r\n\r\n\treturn getHistory();\r\n}\r\n","import {\r\n\trequestHistory,\r\n\taddHistory,\r\n\tregisterNewHistory,\r\n} from 'network/history/index.js';\r\n\r\nexport default {\r\n\tnamespaced: true,\r\n\r\n\tstate() {\r\n\t\treturn {\r\n\t\t\thistory: [],\r\n\t\t};\r\n\t},\r\n\tmutations: {\r\n\t\t// 更新本地的history\r\n\t\tupdateHistory(state, newHistory) {\r\n\t\t\tstate.history = newHistory;\r\n\t\t},\r\n\t},\r\n\tactions: {\r\n\t\tasync requestHistory({ commit }) {\r\n\t\t\tconst { history } = await requestHistory();\r\n\r\n\t\t\tcommit('updateHistory', history);\r\n\t\t},\r\n\r\n\t\tasync registerNewHistory({ commit }, [username]) {\r\n\t\t\tconst { history } = await registerNewHistory(username);\r\n\r\n\t\t\tcommit('updateHistory', history);\r\n\t\t},\r\n\r\n\t\t// 添加历史记录\r\n\t\tasync addHistory({ commit }, newHistory) {\r\n\t\t\tconst history = await addHistory(newHistory);\r\n\r\n\t\t\treturn;\r\n\r\n\t\t\tcommit('updateHistory', history);\r\n\t\t},\r\n\t},\r\n\tgetters: {\r\n\t\thistoryLength({ history }) {\r\n\t\t\treturn history.length;\r\n\t\t},\r\n\t},\r\n};\r\n","import { request } from '../index.js';\r\n\r\n/**\r\n * 模拟API\r\n */\r\n\r\nexport async function requestSortList() {\r\n\treturn await request('/sortList')\r\n\t\t.then((res) => res.json())\r\n\t\t.catch((err) => {\r\n\t\t\tthrow new Error(err);\r\n\t\t});\r\n}\r\n\r\nexport async function requestSortContent(index) {\r\n\treturn await request('/sortList')\r\n\t\t.then((res) => res.json())\r\n\t\t.then(({ data }) => data[index].list)\r\n\t\t.catch((err) => {\r\n\t\t\tthrow new Error(err);\r\n\t\t});\r\n}\r\n","import { requestSortList, requestSortContent } from 'network/sort';\r\n\r\nexport default {\r\n\tnamespaced: true,\r\n\r\n\tstate() {\r\n\t\treturn {\r\n\t\t\tsortList: [],\r\n\t\t\tactiveKey: 0,\r\n\t\t};\r\n\t},\r\n\r\n\tmutations: {\r\n\t\tupdateSortList(state, newSortList) {\r\n\t\t\tstate.sortList = newSortList;\r\n\t\t},\r\n\r\n\t\tupdateActiveKey(state, newKey) {\r\n\t\t\tstate.activeKey = newKey;\r\n\t\t},\r\n\t},\r\n\r\n\tactions: {\r\n\t\tasync requestSortList({ commit }) {\r\n\t\t\tconst { data } = await requestSortList();\r\n\r\n\t\t\tcommit('updateSortList', data);\r\n\t\t},\r\n\r\n\t\tasync requestSortContent(c, index) {\r\n\t\t\treturn await requestSortContent(index);\r\n\t\t},\r\n\t},\r\n\r\n\tgetters: {},\r\n};\r\n","import { request } from '../index.js';\r\nimport { hasCookie, removeCookie } from 'common/cookieAPI.js';\r\n\r\nif (!localStorage.getItem('userStore')) {\r\n\tlocalStorage.setItem('userStore', '[]');\r\n\r\n\tif (hasCookie('isLogin')) {\r\n\t\tremoveCookie('isLogin');\r\n\t}\r\n}\r\n\r\n// 模拟请求函数\r\nasync function makeRequest() {\r\n\treturn await request('/updateUserData')\r\n\t\t.then((res) => res.json())\r\n\t\t.catch((e) => {\r\n\t\t\tthrow new Error(e);\r\n\t\t});\r\n}\r\n\r\n/**\r\n * 模拟API\r\n */\r\n\r\nexport async function requestUserData() {\r\n\tawait makeRequest();\r\n\r\n\treturn {\r\n\t\tuserStore: getUserStore(),\r\n\t\tuserList: getUserList(),\r\n\t};\r\n}\r\n\r\nexport async function registerUser(newUserList) {\r\n\tconst userStore = getUserStore();\r\n\r\n\tuserStore.push(\r\n\t\tObject.assign(\r\n\t\t\t{\r\n\t\t\t\tnickname: `京东用户${userStore.length}`,\r\n\t\t\t},\r\n\t\t\tnewUserList\r\n\t\t)\r\n\t);\r\n\r\n\tawait updateUserStore(userStore);\r\n\r\n\treturn getUserList(newUserList.username);\r\n}\r\n\r\n/**\r\n * 工具函数\r\n */\r\n\r\nfunction getUserList(username = getUsername()) {\r\n\tconst userStore = getUserStore();\r\n\r\n\treturn userStore.find((item) => item.username === username) || [];\r\n}\r\n\r\nfunction getUserStore() {\r\n\treturn JSON.parse(localStorage.getItem('userStore'));\r\n}\r\n\r\nfunction getUsername() {\r\n\treturn localStorage.getItem('username');\r\n}\r\n\r\nasync function updateUserStore(newUserStore) {\r\n\tawait makeRequest();\r\n\r\n\tlocalStorage.setItem('userStore', JSON.stringify(newUserStore));\r\n\r\n\treturn getUserList();\r\n}\r\n","import { registerUser, requestUserData } from 'network/userList/index.js';\r\n\r\nexport default {\r\n\tnamespaced: true,\r\n\r\n\tstate() {\r\n\t\treturn {\r\n\t\t\tuserList: [],\r\n\t\t\tuserStore: [],\r\n\t\t};\r\n\t},\r\n\r\n\tmutations: {\r\n\t\tupdateUserList(state, newUserList) {\r\n\t\t\tstate.userList = newUserList;\r\n\t\t},\r\n\r\n\t\tupdateUserStore(state, newUserStore) {\r\n\t\t\tstate.userStore = newUserStore;\r\n\t\t},\r\n\t},\r\n\r\n\tactions: {\r\n\t\t// 初始化请求\r\n\t\tasync requestUserData({ commit }) {\r\n\t\t\tconst { userStore, userList } = await requestUserData();\r\n\r\n\t\t\tcommit('updateUserList', userList);\r\n\t\t\tcommit('updateUserStore', userStore);\r\n\t\t},\r\n\r\n\t\t// 注册新的user信息\r\n\t\tasync registerNewUser({ commit }, newUserList) {\r\n\t\t\tconst userList = await registerUser(newUserList);\r\n\r\n\t\t\tcommit('updateUserList', userList);\r\n\t\t},\r\n\t},\r\n};\r\n","import Vue from 'vue';\r\nimport Vuex from 'vuex';\r\n\r\nVue.use(Vuex);\r\n\r\nimport cartList from './cartList/module.js';\r\nimport product from './product/module.js';\r\nimport login from './login/module.js';\r\nimport collection from './collection/module.js';\r\nimport history from './history/module.js';\r\nimport sort from './sort/module.js';\r\nimport userData from './userData/module.js';\r\n\r\nexport default new Vuex.Store({\r\n\tstate: {\r\n\t\tisLoading: false,\r\n\t},\r\n\tmutations: {\r\n\t\tchangeIsLoading(state, value) {\r\n\t\t\tstate.isLoading = value;\r\n\t\t},\r\n\t},\r\n\tactions: {\r\n\t\t// 改变loading状态 传入回调函数\r\n\t\tasync changeIsLoading({ commit, state: { isLoading } }, fn) {\r\n\t\t\tcommit('changeIsLoading', true);\r\n\r\n\t\t\tawait fn(isLoading);\r\n\r\n\t\t\tcommit('changeIsLoading', false);\r\n\t\t},\r\n\t},\r\n\tgetters: {},\r\n\tmodules: {\r\n\t\tcartList,\r\n\t\tproduct,\r\n\t\tlogin,\r\n\t\tcollection,\r\n\t\thistory,\r\n\t\tsort,\r\n\t\tuserData,\r\n\t},\r\n});\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('keep-alive',{attrs:{\"exclude\":\"Product, NavBar\"}},[_c('router-view',{key:_vm.key})],1),_c('loading',{attrs:{\"isLoading\":_vm.isLoading}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isLoading),expression:\"isLoading\"}],staticClass:\"loading\"},[_c('van-loading',{attrs:{\"color\":\"#ee0a24\",\"size\":\"40\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div v-show=\"isLoading\"\r\n       class=\"loading\">\r\n    <van-loading color=\"#ee0a24\"\r\n                 size=\"40\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    isLoading: {\r\n      type: Boolean,\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped lang='less'>\r\n.loading {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  z-index: 999;\r\n  transform: translate(-50%, -50%);\r\n\r\n  display: flex;\r\n  justify-content: center;\r\n  align-content: center;\r\n}\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/style-vw-loader/index.js??ref--0-2!./Loading.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/style-vw-loader/index.js??ref--0-2!./Loading.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Loading.vue?vue&type=template&id=7489d258&scoped=true&\"\nimport script from \"./Loading.vue?vue&type=script&lang=js&\"\nexport * from \"./Loading.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Loading.vue?vue&type=style&index=0&id=7489d258&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7489d258\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div>\n\n    <keep-alive exclude=\"Product, NavBar\">\n      <router-view :key=\"key\" />\n    </keep-alive>\n\n    <loading :isLoading=\"isLoading\" />\n  </div>\n</template>\n\n<script>\nimport Loading from 'components/common/Loading/Loading.vue'\n\nimport { createNamespacedHelpers, mapState } from 'vuex'\n\nconst { mapActions: historyActions } = createNamespacedHelpers('history')\nconst { mapActions: collectionActions } = createNamespacedHelpers('collection')\nconst { mapActions: loginActions } = createNamespacedHelpers('login')\nconst { mapActions: userListActions } = createNamespacedHelpers('userData')\nconst { mapActions: sortActions } = createNamespacedHelpers('sort')\n\nexport default {\n  components: {\n    Loading,\n  },\n\n  created() {\n    this.initRequst()\n  },\n\n  computed: {\n    ...mapState(['isLoading']),\n\n    key() {\n      return this.$route.path + Math.random\n    },\n  },\n\n  methods: {\n    ...historyActions(['requestHistory']),\n    ...collectionActions(['requestCollection']),\n    ...loginActions(['requestLogin']),\n    ...userListActions(['requestUserData']),\n    ...sortActions(['requestSortList']),\n\n    // 初始化数据请求\n    initRequst() {\n      this.requestHistory()\n      this.requestCollection()\n      this.requestLogin()\n      this.requestUserData()\n      this.requestSortList()\n    },\n  },\n}\n</script>\n\n<style scoped>\n</style>","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/style-vw-loader/index.js??ref--0-2!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/style-vw-loader/index.js??ref--0-2!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=4f9e2906&scoped=true&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4f9e2906\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\nimport router from './router';\nimport store from './store';\nimport VueLazyLoad from 'vue-lazyload';\nimport Vant from 'vant';\nimport 'vant/lib/index.css';\nimport 'vant/lib/index.less';\nimport 'assets/css/resetVui.less';\nimport 'assets/css/base.css';\nimport 'assets/font/index.css';\n\nimport App from './App.vue';\n\nVue.config.productionTip = false;\n\nVue.use(Vant);\nVue.use(VueLazyLoad);\n\nVue.prototype.ste = () => {\n\tVue.prototype.$toast('该功能还在开发中......');\n};\n\nnew Vue({\n\trouter,\n\tstore,\n\trender: (h) => h(App),\n}).$mount('#app');\n","export function getCookie(key) {\r\n\tconst cookie = document.cookie;\r\n\r\n\tconst keyArr = new RegExp(key).exec(cookie);\r\n\r\n\tif (!keyArr) return keyArr;\r\n\r\n\tconst valueStartIndex = keyArr.index + keyArr[0].length + 1;\r\n\r\n\tconst valueEndIndex =\r\n\t\tcookie.indexOf(';', valueStartIndex) > 0\r\n\t\t\t? cookie.indexOf(';', valueStartIndex)\r\n\t\t\t: cookie.length;\r\n\r\n\treturn cookie.slice(valueStartIndex, valueEndIndex);\r\n}\r\n\r\nexport function setCookie(key, value, day = 0) {\r\n\tconst date = new Date();\r\n\tconst exp = date.getTime() + day * 60 * 60 * 24 * 1000;\r\n\tdate.setTime(exp);\r\n\r\n\tdocument.cookie = `${key}=${value}; expires=${date.toUTCString()}; path=/`;\r\n}\r\n\r\nexport function removeCookie(key) {\r\n\tconst date = new Date(1);\r\n\tconst value = getCookie(key);\r\n\r\n\tdocument.cookie = `${key}=${value};expires=${date.toUTCString()};`;\r\n}\r\n\r\nexport function hasCookie(key) {\r\n\tconst cookie = document.cookie;\r\n\r\n\tconst keyArr = new RegExp(key).exec(cookie);\r\n\r\n\tif (keyArr) return true;\r\n\r\n\treturn false;\r\n}\r\n"],"sourceRoot":""}