(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-666177f8"],{"01a5":function(t,e,s){},"0955":function(t,e,s){"use strict";s("c86e")},"106a":function(t,e,s){},"111c":function(t,e,s){"use strict";s("604c")},"164b":function(t,e,s){"use strict";s("fa0f")},"2de1":function(t,e,s){"use strict";s("6c1b")},"355e":function(t,e,s){},"39fd":function(t,e,s){"use strict";s("c368")},"3f3d":function(t,e,s){},"405e":function(t,e,s){"use strict";s("3f3d")},"4eef":function(t,e,s){"use strict";s("d0b3")},5132:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"product-wrap"},[s("top-nav-bar"),s("top-swipe"),s("product-title"),s("coupon"),s("product-details"),s("bottom-nav-bar")],1)},a=[],c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"top-bar-wrapper"},[s("van-nav-bar",{staticClass:"top-nav",attrs:{fixed:""},on:{"click-left":t.clickLeftIcon},scopedSlots:t._u([{key:"left",fn:function(){return[s("van-icon",{staticClass:"nav-left-icon",attrs:{"class-prefix":"icon",name:"left-back-arrow"}})]},proxy:!0},{key:"title",fn:function(){return[s("tab",{attrs:{"line-color":"linear-gradient(to right, #ee0a24, #facec7)","active-class":"top-tab-itme-active"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[s("tab-item",{staticClass:"top-tab-item",attrs:{title:"商品"}}),s("tab-item",{staticClass:"top-tab-item",attrs:{title:"评价"}}),s("tab-item",{staticClass:"top-tab-item",attrs:{title:"详情"}}),s("tab-item",{staticClass:"top-tab-item",attrs:{title:"推荐"}})],1)]},proxy:!0},{key:"right",fn:function(){return[s("van-icon",{staticClass:"nav-right-icon",attrs:{"class-prefix":"icon",name:"right-more-icon"},on:{click:t.click}})]},proxy:!0}])}),s("div",{staticClass:"top-nav-placeholder"})],1)},o=[],n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tab-wrapper"},[s("div",{ref:"tabItems",staticClass:"tab-items",on:{click:t.click}},[t._t("default")],2),s("div",{ref:"line",staticClass:"line"})])},r=[],l={props:{value:{type:String,default:"0"},lineBottom:{type:[String,Number],default:5},lineWrapper:{},lineColor:{type:String,default:"#000"},activeClass:{type:String,default:""}},mounted(){this.initItems(),this.initLine()},data(){return{line:null,items:null,valueC:this.value}},watch:{value(t){this.valueC=t},valueC(t){this.$emit("input",t)}},methods:{click({target:t}){t=void 0!==this.lineWrapper?this.getItemWrap(t):this.getItemTextEle(t),this.line.style.transform=`translate(${t.offsetLeft}px,  ${-this.lineBottom}px)`,this.emitClick(t),this.emitChange(t)},initLine(){if(!this.$refs.tabItems.children.length)return;const t=this.$refs.line,e=void 0!==this.lineWrapper?this.items[0]:this.getItemTextEle(this.$refs.tabItems);t.style.transform=`translate(${e.offsetLeft}px, ${-this.lineBottom}px)`,t.style.width=e.offsetWidth+"px",t.style.background=this.lineColor,this.line=t,setTimeout(()=>{t.style.transition="transform 0.2s"})},initItems(){this.items=this.$refs.tabItems.children,this.items[0].classList.add(this.activeClass),this.valueC="0"},getItemTextEle(t){if(t.hasChildNodes())for(const e of t.childNodes){if(3===e.nodeType)return e.parentNode;const t=this.getItemTextEle(e);if(t)return t}},getItemWrap(t){return t.classList.contains("tab-item")?t:this.getItemWrap(t.parentNode)},getItemIndex(t){t=this.getItemWrap(t);const e=this.items;for(const s in e){const i=e[s];if(i===t)return s}},setItemActive(t){t=this.getItemWrap(t);const e=this.items;for(const s in Object.keys(e)){const t=e[s];t.classList.remove(this.activeClass)}t.classList.add(this.activeClass)},emitClick(t){const e=this.getItemIndex(this.getItemWrap(t)),s=this.getItemTextEle(t).innerText;this.$emit("click",[e,s])},emitChange(t){const e=this.getItemIndex(this.getItemWrap(t)),s=this.getItemTextEle(t).innerText;this.$emit("change",[e,s]),this.setItemActive(t),this.valueC=e}}},d=l,u=(s("2de1"),s("2877")),p=Object(u["a"])(d,n,r,!1,null,"123ca250",null),h=p.exports,m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tab-item"},[s("span",{staticClass:"tab-item-text"},[t._v(t._s(t.title))])])},f=[],v={props:{title:""}},C=v,b=(s("5fae"),Object(u["a"])(C,m,f,!1,null,"22d26475",null)),w=b.exports,k={components:{Tab:h,TabItem:w},data(){return{active:""}},methods:{clickLeftIcon(){this.$router.go(-1)},click(){this.$router.push({path:"/product/3"})}}},g=k,x=(s("405e"),Object(u["a"])(g,c,o,!1,null,"3882c83c",null)),_=x.exports,S=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.topSwipe.length?s("div",{staticClass:"top-swipe-wrap"},[s("van-swipe",{staticClass:"top-swipe",attrs:{loop:!1},on:{change:t.change},scopedSlots:t._u([{key:"indicator",fn:function(){return[s("div",{staticClass:"top-swipe-indicator"},[s("div",{staticClass:"top-swipe-indicator-left"},[t._v(t._s(t.index))]),s("div",{staticClass:"top-swipe-indicator-right"},[t._v("/"+t._s(t.imagesLength))])])]},proxy:!0}],null,!1,2969373545)},t._l(t.topSwipe,(function(t){return s("van-swipe-item",{key:t.id,staticClass:"top-swipe-item"},[s("img",{attrs:{src:t.url,alt:""}})])})),1)],1):t._e()},I=[],y=s("2f62");const{mapState:O}=Object(y["a"])("product");var N={data(){return{index:1}},computed:{...O(["topSwipe"]),imagesLength(){if(this.topSwipe.length)return this.topSwipe.length}},methods:{change(t){this.index=t+1}}},j=N,$=(s("5e69"),Object(u["a"])(j,S,I,!1,null,"89078296",null)),P=$.exports,E=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"product-title-wrap"},[s("price"),s("product-text")],1)},L=[],T=function(){var t=this,e=t.$createElement,s=t._self._c||e;return Object.keys(t.price).length?s("div",{staticClass:"price-wrap clear-fix"},[s("div",{staticClass:"price-left"},[s("div",[t._v("￥")]),s("div",{staticClass:"price-integer"},[t._v(t._s(t.integerPrice))]),s("div",{staticClass:"price-decimal"},[t._v(t._s(t.decimalPrice))])]),s("div",{staticClass:"price-right"},[s("div",{staticClass:"price-collection",on:{click:t.clickCollection}},[s("van-icon",{directives:[{name:"show",rawName:"v-show",value:!t.isCollection,expression:"!isCollection"}],staticClass:"price-collection-icon",attrs:{"class-prefix":"icon",name:"product-price-collection-icon"}}),s("van-icon",{directives:[{name:"show",rawName:"v-show",value:t.isCollection,expression:"isCollection"}],staticClass:"price-collection-icon price-collection-icon-active",attrs:{"class-prefix":"icon",name:"product-price-collection-icon-active"}}),s("div",{staticClass:"price-collection-text"},[t._v(t._s(t.collectionText))])],1)])]):t._e()},A=[];const{mapState:D}=Object(y["a"])("product"),{mapActions:B,mapGetters:W}=Object(y["a"])("collection");var G={data(){return{}},computed:{...D(["price","productIid"]),...W(["hasProductCollection"]),priceNum(){return String(this.price.text)},integerPrice(){return this.priceNum.indexOf(".")<0?this.priceNum:this.priceNum.slice(0,this.priceNum.indexOf("."))},decimalPrice(){return this.priceNum.indexOf(".")<0?".00":this.priceNum.slice(this.priceNum.indexOf("."))},collectionText(){return this.isCollection?"已收藏":"收藏"},isCollection(){return this.hasProductCollection(this.productIid)}},methods:{...B(["addProductCollection","removeProductCollection"]),clickCollection(){this.isCollection?this.removeProductCollection(this.productIid):this.addProductCollection({productIid:this.productIid})}}},q=G,M=(s("9ec0"),Object(u["a"])(q,T,A,!1,null,"233ca182",null)),H=M.exports,J=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"title-wrap"},[s("h3",{staticClass:"title-text"},[t._v(t._s(t.title.text))])])},R=[];const{mapState:V}=Object(y["a"])("product");var z={computed:{...V(["title"])}},F=z,K=(s("a7c0"),Object(u["a"])(F,J,R,!1,null,"dc49f03a",null)),Q=K.exports,U={components:{Price:H,ProductText:Q}},X=U,Y=(s("164b"),Object(u["a"])(X,E,L,!1,null,"f082cb20",null)),Z=Y.exports,tt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.coupon?s("div",{staticClass:"coupon-wrap"},[s("van-coupon-cell",{staticClass:"coupon-cell",attrs:{coupons:t.coupons,"chosen-coupon":t.chosenCoupon,borde:!1},on:{click:function(e){t.showCouponList=!0}}}),s("van-popup",{staticClass:"coupon-popup",attrs:{round:"",position:"bottom",closeable:""},model:{value:t.showCouponList,callback:function(e){t.showCouponList=e},expression:"showCouponList"}},[s("van-coupon-list",{staticClass:"coupon-popup-list",attrs:{coupons:t.coupons,"disabled-coupons":t.disabledCoupons,"chosen-coupon":t.chosenCoupon,"show-exchange-bar":!1,"show-count":!1},on:{change:t.changeCoupon}})],1)],1):t._e()},et=[];const{mapState:st}=Object(y["a"])("product");var it={data(){return{showCouponList:!1,chosenCoupon:-1}},computed:{...st(["coupon"]),coupons(){return this.coupon.coupons},disabledCoupons(){return this.coupon.disabledCoupons}},methods:{changeCoupon(t){this.chosenCoupon=t,this.showCouponList=!1}}},at=it,ct=(s("c1fa"),Object(u["a"])(at,tt,et,!1,null,"f7f715f2",null)),ot=ct.exports,nt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"detail-wrap"},[s("sku-window"),s("product-address"),s("service-area")],1)},rt=[],lt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return Object.keys(t.skuData).length?s("div",{staticClass:"sku-window-wrap"},[s("div",{staticClass:"sku-window",on:{click:t.click}},[s("div",{staticClass:"sku-window-title"},[t._v("已选")]),s("div",{staticClass:"sku-window-selected"},[t._v(t._s(t.selectedText))]),s("div",{staticClass:"sku-window-right-icon"},[s("img",{attrs:{src:t.rightIcon,alt:""}})])]),s("van-sku",{ref:"sku",attrs:{sku:t.skuData.sku,goods:t.skuData.goodsInfo,"goods-id":t.productIid,"initial-sku":t.skuData.initialSku,"start-sale-num":t.skuData.startSaleNum,quota:t.skuData.quota,"lazy-load":!0},on:{"add-cart":t.addCart,"buy-clicked":t.clickBuy,"sku-selected":t.changeSelected,"stepper-change":t.changeSelectedNum},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}})],1):t._e()},dt=[];const{mapState:ut,mapMutations:pt}=Object(y["a"])("product"),{mapActions:ht}=Object(y["a"])("cartList");var mt={data(){return{show:!1,selectedText:"",rightIcon:s("5cb6")}},computed:{...ut(["selectedSkuComb","selectedNum","title","shop","productIid","skuData","showSku"])},watch:{show(t){this.changeShowSku(t)},showSku(t){this.show=t}},methods:{...pt(["updateSelectedSkuComb","findSelectedImage","updateSelectedNum","changeShowSku"]),...ht(["addProduct"]),click(){this.show=!0},async addCart(){this.addProduct(),this.show=!1},clickBuy(){this.ste()},getSkuValueName(t){const e={},s=[];for(const i of Object.keys(t))new RegExp(/^s\d+/).test(i)&&(e[i]=t[i]);for(const i in e)for(const t of this.skuData.sku.tree)if(String(t.k_s)===i)for(const a of t.v)if(a.id===e[i]){s.push(a.name);break}return s},changeSelected(){const t=this.$refs.sku.getSkuData(),{selectedNum:e,selectedSkuComb:s}=t;if(this.updateSelectedSkuComb(s),!s)return;const i=`${this.getSkuValueName(s).join("，")}，${e}个`;this.selectedText=i},changeSelectedNum(t){this.updateSelectedNum(t)}}},ft=mt,vt=(s("c45d"),Object(u["a"])(ft,lt,dt,!1,null,"2f8f975e",null)),Ct=vt.exports,bt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"address-wrap"},[i("div",{staticClass:"address-window",on:{click:function(e){t.show=!0}}},[i("div",{staticClass:"address-window-title"},[t._v("送至")]),i("div",{staticClass:"address-window-detail"},[i("div",{staticClass:"address-window-detail-address"},[t._v(" "+t._s(t.addressDetail)+" ")]),i("div",{staticClass:"address-window-detail-describe"},[i("div",{staticClass:"address-window-detail-describe-has-stock"},[t._v(t._s(t.address.hasStock))]),i("div",{staticClass:"address-window-detail-describe-merchant-address"},[t._v(" 由商家从 "+t._s(t.address.merchantAddress)+" 发货 ")])])]),i("div",{staticClass:"address-window-right-icon"},[i("img",{attrs:{src:s("5cb6"),alt:""}})])]),i("van-popup",{attrs:{round:"",position:"bottom"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[i("van-cascader",{attrs:{options:t.address.list,"field-names":t.fieldNames,title:"配送至"},on:{finish:t.finish}})],1)],1)},wt=[];const{mapState:kt}=Object(y["a"])("product");var gt={data(){return{show:!1,fieldNames:{text:"name",value:"code",children:"items"},addressDetail:"大师傅按时发撒的发放发顺丰速度"}},computed:{...kt(["address"])},methods:{finish({selectedOptions:t}){let e="";for(const{name:s}of t)e+=s;this.addressDetail=e,this.show=!1}}},xt=gt,_t=(s("39fd"),Object(u["a"])(xt,bt,wt,!1,null,"2faf4273",null)),St=_t.exports,It=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"service-area-wrap"},[i("div",{staticClass:"service-area-window",on:{click:function(e){t.show=!0}}},[t._l(t.serviceArea,(function(e){return i("div",{key:e.title,staticClass:"service-area-window-item"},[i("div",{staticClass:"service-area-item-text"},[e.disabled?t._e():i("van-icon",{staticClass:"item-left-icon",attrs:{"class-prefix":"icon",name:"product-details-service-area-icon"}}),e.disabled?i("van-icon",{staticClass:"item-left-icon disabled",attrs:{"class-prefix":"icon",name:"product-details-service-area-icon-disabled"}}):t._e(),t._v(" "+t._s(e.title)+" ")],1)])})),i("div",{staticClass:"service-area-window-right-icon"},[i("img",{attrs:{src:s("5cb6"),alt:""}})])],2),i("van-popup",{staticClass:"service-area-popup",attrs:{position:"bottom",round:"",closeable:""},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[i("div",{staticClass:"service-area-popup-info"},[i("div",{staticClass:"service-area-popup-info-title"},[t._v("服务")]),t._l(t.serviceArea,(function(e,s){return i("div",{key:e.title,staticClass:"service-area-popup-info-item",class:{"item-first":0===s}},[i("div",{staticClass:"service-area-popup-info-item-title"},[e.disabled?t._e():i("van-icon",{staticClass:"item-left-icon",attrs:{"class-prefix":"icon",name:"product-details-service-area-icon"}}),e.disabled?i("van-icon",{staticClass:"item-left-icon disabled",attrs:{"class-prefix":"icon",name:"product-details-service-area-icon-disabled"}}):t._e(),i("div",{staticClass:"service-area-popup-info-item-title-text"},[t._v(t._s(e.title))])],1),i("div",{staticClass:"service-area-popup-info-item-describe"},[t._v(t._s(e.describe))])])}))],2)])],1)},yt=[];const{mapState:Ot}=Object(y["a"])("product");var Nt={data(){return{show:!1}},computed:{...Ot(["serviceArea"])}},jt=Nt,$t=(s("0955"),Object(u["a"])(jt,It,yt,!1,null,"f5b6632e",null)),Pt=$t.exports,Et={components:{SkuWindow:Ct,ProductAddress:St,ServiceArea:Pt}},Lt=Et,Tt=(s("111c"),Object(u["a"])(Lt,nt,rt,!1,null,"6595154c",null)),At=Tt.exports,Dt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bottom-bar-wrapper"},[s("van-goods-action",[s("van-goods-action-icon",{staticClass:"icon-wrapper",on:{click:t.clickBusiness},scopedSlots:t._u([{key:"icon",fn:function(){return[s("van-icon",{staticClass:"business icon",attrs:{"class-prefix":"icon",name:"product-bottom-bar-business"}})]},proxy:!0}])},[s("div",{staticClass:"icon-text"},[t._v("店铺")])]),s("van-goods-action-icon",{staticClass:"icon-wrapper",on:{click:t.clickCustomerService},scopedSlots:t._u([{key:"icon",fn:function(){return[s("van-icon",{staticClass:"icon",attrs:{"class-prefix":"icon",name:"product-bottom-bar-customer-service"}})]},proxy:!0}])},[s("div",{staticClass:"icon-text"},[t._v("客服")])]),s("van-goods-action-icon",{staticClass:"icon-wrapper",on:{click:t.clickCart},scopedSlots:t._u([{key:"icon",fn:function(){return[t.getProductNumber?s("van-badge",{attrs:{content:t.getProductNumber}},[s("van-icon",{staticClass:"icon",attrs:{"class-prefix":"icon",name:"product-bottom-bar-cart"}})],1):t._e(),t.getProductNumber?t._e():s("van-icon",{staticClass:"icon",attrs:{"class-prefix":"icon",name:"product-bottom-bar-cart"}})]},proxy:!0}])},[s("div",{staticClass:"icon-text"},[t._v("购物车")])]),s("van-goods-action-button",{staticClass:"button",attrs:{type:"primary",text:"加入购物车",color:"linear-gradient(to right, #f2180c, #f23f0c)"},on:{click:t.clickAddCart}}),s("van-goods-action-button",{staticClass:"button",attrs:{type:"primary",text:"立刻购买",color:"linear-gradient(to right, #ffbb0d, #ffcb0d)"},on:{click:t.clickBuy}})],1),s("div",{staticClass:"bottom-bar-placeholder"})],1)},Bt=[];const{mapActions:Wt,mapGetters:Gt}=Object(y["a"])("cartList"),{mapState:qt,mapMutations:Mt}=Object(y["a"])("product");var Ht={computed:{...Gt(["getProductNumber"]),...qt(["selectedSkuComb"])},methods:{...Wt(["addProduct"]),...Mt(["changeShowSku"]),clickBusiness(){this.ste()},clickCustomerService(){this.ste()},clickCart(){this.$router.push({name:"Cart"})},clickAddCart(){this.selectedSkuComb?this.addProduct():this.changeShowSku(!0)},clickBuy(){this.ste()}}},Jt=Ht,Rt=(s("85d4"),Object(u["a"])(Jt,Dt,Bt,!1,null,"2bfb9482",null)),Vt=Rt.exports,zt=s("1ae0");function Ft(){return Object(zt["a"])("/productGoodsList").then(t=>t.json()).catch(t=>{throw new Error(t)})}const{mapMutations:Kt}=Object(y["a"])("product"),{mapActions:Qt}=Object(y["a"])("history");var Ut={name:"Product",components:{TopNavBar:_,TopSwipe:P,ProductTitle:Z,Coupon:ot,ProductDetails:At,BottomNavBar:Vt},created(){this.productIid=this.$route.params.iid,this.requestGoodsList()},beforeRouteEnter(t,e,s){s(t=>{e.name&&"Product"!==e.name&&t.addHistory({shopsIid:t.shopIid,productIid:t.productIid})})},data(){return{productIid:NaN,shopIid:NaN}},methods:{...Kt(["addState"]),...Qt(["addHistory"]),requestGoodsList(){Ft().then(({topSwipe:t,price:e,title:s,coupon:i,skuData:a,address:c,serviceArea:o,shop:n})=>{this.addState({topSwipe:t,price:e,title:s,coupon:i,skuData:a,address:c,serviceArea:o,shop:n,productIid:this.productIid}),this.shopIid=n.shopsIid,document.title=s.text})}}},Xt=Ut,Yt=(s("4eef"),Object(u["a"])(Xt,i,a,!1,null,"a1904224",null));e["default"]=Yt.exports},"5cb6":function(t,e,s){t.exports=s.p+"img/right-icon.00ec1498.png"},"5e69":function(t,e,s){"use strict";s("01a5")},"5fae":function(t,e,s){"use strict";s("90a5")},"604c":function(t,e,s){},"6c1b":function(t,e,s){},"85d4":function(t,e,s){"use strict";s("9d06")},"90a5":function(t,e,s){},9437:function(t,e,s){},"9d06":function(t,e,s){},"9ec0":function(t,e,s){"use strict";s("9437")},a143:function(t,e,s){},a7c0:function(t,e,s){"use strict";s("106a")},c1fa:function(t,e,s){"use strict";s("a143")},c368:function(t,e,s){},c45d:function(t,e,s){"use strict";s("355e")},c86e:function(t,e,s){},d0b3:function(t,e,s){},fa0f:function(t,e,s){}}]);
//# sourceMappingURL=chunk-666177f8.c8ebd429.js.map