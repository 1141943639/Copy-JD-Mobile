(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d4831df2"],{"015e":function(t,e,s){},"02ef":function(t,e,s){"use strict";s("015e")},"0396":function(t,e,s){},"04ed":function(t,e,s){"use strict";s("f223")},"0720":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sort-wrap"},[s("sort-content"),s("bottom-nav-bar")],1)},o=[],n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sort-content"},[s("sort-side-bar"),s("sort-content-info")],1)},a=[],r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sort-side-bar-wrap"},[s("sidebar",{staticClass:"sort-side-bar",model:{value:t.activeKeyCopy,callback:function(e){t.activeKeyCopy=e},expression:"activeKeyCopy"}},t._l(t.sortList,(function(t){return s("sidebar-item",{key:t.id,staticClass:"sort-side-bar-item",attrs:{title:t.title}})})),1)],1)},c=[],h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"sidebar",staticClass:"sidebar",on:{click:t.clickItme,touchmove:t.moveBar,touchstart:t.touchStart,touchend:t.touchEnd}},[s("div",{ref:"position",staticClass:"sidebar-position"},[t._t("default")],2)])},l=[],d={props:{value:{type:Number}},mounted(){this.pos.addEventListener("transitionend",()=>{this.removeTransition()})},data(){return{translateY:0,aboutMove:0,beforeMove:0,threshold:100}},computed:{pos(){return this.$refs.position},sidebar(){return this.$refs.sidebar},moveDistance(){return this.aboutMove-this.beforeMove},topThreshold(){return 0},bottomThreshold(){return-(this.pos.offsetHeight-this.sidebar.offsetHeight)}},methods:{clickItme({target:t}){const e=[].slice.call(this.$refs.position.children);let s=[];e.forEach(t=>{t.classList.remove("sidebar-item-active")}),t.classList.add("sidebar-item-active");for(const i in e){const o=e[i];if(o===t){this.$emit("input",Number(i)),s=o;break}}this.addTransition(),this.changePosY(-s.offsetTop<this.bottomThreshold?this.bottomThreshold:-s.offsetTop)},touchStart({touches:{0:{clientY:t}}}){this.removeTransition();const e=t-this.sidebar.offsetTop;this.beforeMove=e},moveBar({touches:{0:{clientY:t}}}){const e=t-this.sidebar.offsetTop;this.aboutMove=e,this.checkHasBufferThresholdExceeded()||(this.changePosY(this.translateY+this.moveDistance),this.beforeMove=e)},touchEnd({changedTouches:{0:{clientY:t}}}){this.sidebar.offsetTop;(this.translateY>this.topThreshold||this.translateY<this.bottomThreshold)&&(this.addTransition(),this.changePosY(this.translateY>0?0:this.bottomThreshold))},changePosY(t){this.pos.style=`transform: translateY(${t}px)`;const e=/(\d.\d+|\d|-\d)+/;this.translateY=Number(e.exec(this.pos.style.transform)[0])},checkHasBufferThresholdExceeded(){return this.translateY+this.moveDistance>=this.topThreshold+this.threshold||this.translateY<=this.bottomThreshold-this.threshold},addTransition(){this.pos.classList.add("sidebar-position-move")},removeTransition(){this.pos.classList.remove("sidebar-position-move")}}},u=d,f=(s("04ed"),s("2877")),b=Object(f["a"])(u,h,l,!1,null,"d974aa5e",null),m=b.exports,v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"sidebarItem",staticClass:"sidebar-item"},[t._v(" "+t._s(t.title)+" ")])},p=[],C={props:{title:{type:String}},computed:{offsetTop(){return this.$refs.sidebarItem.offsetTop}},mounted(){const t=this.$refs.sidebarItem,e=[].slice.call(this.$parent.$refs.position.children)[0];e===t&&t.classList.add("sidebar-item-active")}},T=C,y=(s("02ef"),Object(f["a"])(T,v,p,!1,null,"08ac4e4b",null)),Y=y.exports,_=s("2f62");const{mapMutations:x,mapState:$}=Object(_["a"])("sort");var g={components:{Sidebar:m,SidebarItem:Y},data(){return{activeKeyCopy:0}},computed:{...$(["activeKey","sortList"])},watch:{activeKey:{handler:"updateActiveKeyCopy",immediate:!0},activeKeyCopy(t){this.updateActiveKey(t)}},methods:{...x(["updateActiveKey"]),updateActiveKeyCopy(t){this.activeKeyCopy=t}}},k=g,E=(s("9ac8"),Object(f["a"])(k,r,c,!1,null,"6f7f4d72",null)),S=E.exports,L=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sort-content-info-wrap"},[s("sidebar-content",{staticClass:"sort-content-info-item",attrs:{list:t.contentList}})],1)},w=[],M=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"sidebarContent",staticClass:"sidebar-content",on:{touchmove:t.moveBar,touchstart:t.touchStart,touchend:t.touchEnd}},[s("div",{ref:"position",staticClass:"sidebar-content-position"},t._l(t.list,(function(e){return s("div",{key:e.id,staticClass:"sidebar-content-info"},[s("div",{staticClass:"sidebar-content-title"},[t._v(t._s(e.title))]),s("div",{staticClass:"sidebar-content-item"},t._l(e.list,(function(e){return s("div",{key:e.id,staticClass:"sidebar-content-item-info"},[s("div",{staticClass:"sidebar-content-item-img"},[s("img",{attrs:{src:e.img,alt:""}})]),s("div",{staticClass:"sidebar-content-item-text"},[t._v(t._s(e.text))])])})),0)])})),0)])},K=[],B={props:{list:{type:Array,default:()=>[]}},data(){return{translateY:0,aboutMove:0,beforeMove:0,threshold:100}},watch:{list(){this.changePosY(0)}},computed:{pos(){return this.$refs.position},sidebarContent(){return this.$refs.sidebarContent},moveDistance(){return this.aboutMove-this.beforeMove},topThreshold(){return 0},bottomThreshold(){return-(this.pos.offsetHeight-this.sidebarContent.offsetHeight)}},methods:{touchStart({touches:{0:{clientY:t}}}){this.removeTransition();const e=t-this.sidebarContent.offsetTop;this.beforeMove=e},moveBar({touches:{0:{clientY:t}}}){const e=t-this.sidebarContent.offsetTop;this.aboutMove=e,this.checkHasBufferThresholdExceeded()||(this.changePosY(this.translateY+this.moveDistance),this.beforeMove=e)},touchEnd({changedTouches:{0:{clientY:t}}}){this.sidebarContent.offsetTop;(this.translateY>this.topThreshold||this.translateY<this.bottomThreshold)&&(this.addTransition(),this.changePosY(this.translateY>0?0:this.bottomThreshold))},changePosY(t){this.pos.style=`transform: translateY(${t}px)`;const e=/(\d.\d+|\d|-\d)+/;this.translateY=Number(e.exec(this.pos.style.transform)[0])},checkHasBufferThresholdExceeded(){return this.translateY+this.moveDistance>=this.topThreshold+this.threshold||this.translateY<=this.bottomThreshold-this.threshold},addTransition(){this.pos.classList.add("sidebar-content-position-move")},removeTransition(){this.pos.classList.remove("sidebar-content-position-move")}}},j=B,O=(s("5cdd"),Object(f["a"])(j,M,K,!1,null,"303e1afc",null)),N=O.exports;const{mapActions:P,mapState:H}=Object(_["a"])("sort");var I={components:{SidebarContent:N},data(){return{contentList:[]}},computed:{...H(["activeKey"])},watch:{activeKey:{handler:"requestNewContent",immediate:!0}},methods:{...P(["requestSortContent"]),async requestNewContent(t){this.contentList=await this.requestSortContent(t)}}},A=I,D=(s("b331"),Object(f["a"])(A,L,w,!1,null,"698924ee",null)),q=D.exports,J={components:{SortSideBar:S,SortContentInfo:q}},z=J,F=(s("96ef"),Object(f["a"])(z,n,a,!1,null,"8e99d544",null)),G=F.exports,Q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("nav-bar")],1)},R=[],U=s("c5b9"),V={components:{NavBar:U["a"]}},W=V,X=Object(f["a"])(W,Q,R,!1,null,"3eb39e22",null),Z=X.exports,tt={components:{SortContent:G,BottomNavBar:Z}},et=tt,st=Object(f["a"])(et,i,o,!1,null,"567ab076",null);e["default"]=st.exports},"284b":function(t,e,s){},"2ef3":function(t,e,s){"use strict";s("0396")},"4f47":function(t,e,s){},"5cdd":function(t,e,s){"use strict";s("8e17")},"8e17":function(t,e,s){},"96ef":function(t,e,s){"use strict";s("f7b8")},"9ac8":function(t,e,s){"use strict";s("4f47")},b331:function(t,e,s){"use strict";s("284b")},c5b9:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("van-tabbar",{attrs:{"active-color":"#ee0a24",route:"",placeholder:""},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.tabList,(function(e,i){return s("van-tabbar-item",{key:e.name,class:{active:t.active===i},attrs:{to:e.to},scopedSlots:t._u([{key:"icon",fn:function(){return[s("van-icon",{staticClass:"nav-bar-icon",attrs:{"class-prefix":"icon",name:"nav-bar-"+e.icon}})]},proxy:!0}],null,!0)},[t._v(" "+t._s(e.name)+" ")])})),1)],1)},o=[],n={data(){return{active:0,tabList:[{name:"首页",icon:"home",to:"/"},{name:"分类",icon:"sort",to:"Sort"},{name:"购物车",icon:"cart",to:"Cart"},{name:"我的",icon:"profile",to:"Profile"}]}},created(){for(const t in this.tabList){const{to:e}=this.tabList[t];if(e===this.$route.name){this.active=Number(t);break}}}},a=n,r=(s("2ef3"),s("2877")),c=Object(r["a"])(a,i,o,!1,null,"e71aa760",null);e["a"]=c.exports},f223:function(t,e,s){},f7b8:function(t,e,s){}}]);
//# sourceMappingURL=chunk-d4831df2.e16130e4.js.map